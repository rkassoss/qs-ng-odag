app.directive("qlikDropdown",["$state","qlikService",function(e){return{restrict:"E",transclude:!0,scope:{qField:"@qField",qSelection:"@qSelection",qLabel:"@qLabel",qDefault:"@qDefault",style:"@style",class:"@class"},template:'<label class="inline-label">{{ qLabel }}</label><select style="{{style}}" class="form-control {{class}}"  ng-model="selected" ng-change="onChange(selected)" class="form-control {{class}}"><option ng-repeat="option in options">{{ option[0].qText }}</option></select>',link:function(l,e,t,s){senseApp||(senseApp=e.getApp()),senseApp.createList({qDef:{qFieldDefs:[l.qField]},qInitialDataFetch:[{qTop:0,qLeft:0,qHeight:500,qWidth:1}]},function(e){var t=[];0<e.qListObject.qDataPages.length&&e.qListObject.qDataPages[0].qMatrix&&(t=e.qListObject.qDataPages[0].qMatrix),l.options=t,angular.forEach(t,function(t,e){angular.forEach(l.options,function(e){"S"==t[0].qState&&(l.selected=t[0].qText)})}),destroyableObjectIds.push(e.qInfo.qId)}),l.onChange=function(e){l.selected=e,l.$emit("qlikSelect.selected",l.selected),e?senseApp.field(l.qField).selectMatch(e):senseApp.field(l.qField).selectMatch()}}}}]);